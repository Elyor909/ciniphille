import{h as _,r as p,o,c as l,f as n,u as h,i as v,t as c,a as u,b,F as f,l as g,d as $,w as x,e as w,m as I,n as S,p as R,q as D,y as F,s as B}from"./index-1af602d7.js";const A={class:"main__intro"},C=["src"],L={class:"main__intro-block"},M={class:"main__intro-left"},N={class:"main__intro-left-title"},T={class:"main__intro-left-text"},V={class:"main__intro-left-descr"},Y={class:"main__intro-right"},j=["src"],z={class:"main__intro-actors"},O=n("h2",{class:"main__intro-actors-title"},"В главных ролях",-1),U={class:"main__intro-actors-casts"},q={__name:"Intro",props:{type:String,item:Object},setup(t){const e=t,i=_(()=>new Date(e.item.release_date).getFullYear()||new Date(e.item.first_air_date).getFullYear()),r=_(()=>e.item.genres.reduce((s,m)=>s+`, ${m.name}`,"")),a=_(()=>{let s=e.type=="movie"?e.item.runtime:e.type=="tv"?e.item.episode_run_time:"",m=Math.floor(s/60),d=s%60;return m==0?d+"m":m+"h "+d+"m"});return(s,m)=>{const d=p("Trailer"),y=p("Actors");return o(),l("div",A,[n("img",{src:h(v)+t.item.poster_path,alt:"",class:"main__intro-img"},null,8,C),n("div",L,[n("div",M,[n("h1",N,c(t.item.title||t.item.name),1),n("p",T,c(t.item.overview||"Нет описания"),1),n("p",V,[n("span",null,c(i.value)+c(r.value),1),n("span",null,c(a.value),1)]),u(d)]),n("div",Y,[n("img",{src:h(v)+t.item.backdrop_path,alt:""},null,8,j)]),n("div",z,[O,n("div",U,[u(y,{type:e.type,id:t.item.id,count:"6"},null,8,["type","id"])])])])])}}},E={key:0,class:"main__recommend"},G={class:"container"},K=n("h2",{class:"main__recommend-title"},"Рекомендации",-1),H={class:"main__recommend-list"},J={alt:"",class:"main__recommend-list-item-img"},P={class:"main__recommend-list-item-title"},Q={__name:"Recommend",props:{rec:Array,type:String},setup(t){return(e,i)=>{const r=p("router-link"),a=b("lazy");return t.rec?(o(),l("div",E,[n("div",G,[K,n("div",H,[(o(!0),l(f,null,g(t.rec,s=>(o(),$(r,{key:s.id,to:t.type+"/"+s.id,class:"main__recommend-list-item"},{default:x(()=>[w(n("img",J,null,512),[[a,h(v)+s.backdrop_path]]),n("h2",P,c(s.title||s.name),1)]),_:2},1032,["to"]))),128))])])])):I("",!0)}}},W={class:"main__info"},X={class:"main__info-item-name"},Z={class:"main__info-item-info"},ee={__name:"Info",props:{item:Object},setup(t){const e=t,i=_(()=>[{name:"Бюджет",info:e.item.budget},{name:"Сборы",info:e.item.revenue},{name:"Статус",info:e.item.status},{name:"Исходное название",info:e.item.original_title||e.item.original_name}]);return(r,a)=>(o(),l("div",W,[(o(!0),l(f,null,g(i.value,s=>(o(),l("div",{class:"main__info-item",key:s.name},[n("span",X,c(s.name),1),n("span",Z,c(s.info?"$"+s.info:"Неизвестно"),1)]))),128))]))}},te=S("recommend",{state:()=>({url:"https://api.themoviedb.org/3/",movies:null,tvs:null}),actions:{async getRecommend({type:t,id:e}){try{let i=await R.get(`${this.url}${t}/${e}/recommendations?api_key=${D}&language=ru-RU`);t=="movie"?this.movies=i.data.results:t=="tv"&&(this.tvs=i.data.results)}catch{console.error("ошибка при получении рекомендуемых данных")}}}}),se={key:0,class:"main__media"},ie={__name:"MediaItem",props:{type:String},setup(t){const e=t,i=te(),r=F(),a=B();a.getItemId({type:e.type,id:r.params.id}),i.getRecommend({type:e.type,id:r.params.id});const s=_(()=>e.type=="movie"?a.movie:e.type=="tv"?a.tv:""),m=_(()=>e.type=="movie"?i.movies.slice(0,4):e.type=="tv"?i.tvs.slice(0,4):"");return(d,y)=>{const k=p("Loader");return s.value?(o(),l("div",se,[u(q,{type:t.type,item:s.value},null,8,["type","item"]),u(ee,{item:s.value},null,8,["item"]),u(Q,{type:t.type,rec:m.value},null,8,["type","rec"])])):(o(),$(k,{key:1}))}}};export{ie as _};
